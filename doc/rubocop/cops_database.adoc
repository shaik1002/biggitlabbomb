////
  Do NOT edit this file by hand directly, as it is automatically generated.

  Please make any necessary changes to the cop documentation within the source files themselves.
////

= Database

[#databaseavoidinheritancecolumn]
== Database/AvoidInheritanceColumn

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Enabled
| Yes
| No
| -
| -
|===

Checks for `self.inheritance_column` usage, which is discouraged https://docs.gitlab.com/ee/development/database/single_table_inheritance.html

[#databaseavoidusingpluckwithoutlimit]
== Database/AvoidUsingPluckWithoutLimit

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Enabled
| Yes
| No
| -
| -
|===

Checks the use of .pluck(:attribute) without setting a limit.

[#examples-databaseavoidusingpluckwithoutlimit]
=== Examples

[source,ruby]
----
# bad
def all
  Project.where(user_id: User.pluck(:id))
end

# good
def all(limit)
  Project.where(user_id: User.limit(limit).pluck(:id))
end
----

[#databasedisablereferentialintegrity]
== Database/DisableReferentialIntegrity

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Enabled
| Yes
| No
| -
| -
|===

Cop that checks if 'disable_referential_integrity' method is called.

[#databaseestablishconnection]
== Database/EstablishConnection

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Enabled
| Yes
| No
| -
| -
|===

No documentation

[#databasemultipledatabases]
== Database/MultipleDatabases

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Enabled
| Yes
| No
| -
| -
|===



[#examples-databasemultipledatabases]
=== Examples

[source,ruby]
----
# bad
ActiveRecord::Base.connection

# good
ApplicationRecord.connection
----

[#databaserescuequerycanceled]
== Database/RescueQueryCanceled

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Enabled
| Yes
| No
| -
| -
|===

Checks for `rescue` blocks targeting the `ActiveRecord::QueryCanceled` class.

[#examples-databaserescuequerycanceled]
=== Examples

[source,ruby]
----
# bad

begin
  run_an_expensive_long_query
rescue ActiveRecord::QueryCanceled
  try_something_else
end
----

[source,ruby]
----
# good

run_cheap_queries_with_each_batch
----

[#databaserescuestatementtimeout]
== Database/RescueStatementTimeout

|===
| Enabled by default | Safe | Supports autocorrection | Version Added | Version Changed

| Enabled
| Yes
| No
| -
| -
|===

Checks for `rescue` blocks targeting the `ActiveRecord::StatementTimeout` class.

[#examples-databaserescuestatementtimeout]
=== Examples

[source,ruby]
----
# bad

begin
  run_an_expensive_long_query
rescue ActiveRecord::StatementTimeout
  try_something_else
end
----

[source,ruby]
----
# good

run_cheap_queries_with_each_batch
----
